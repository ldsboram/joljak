# README.md

## HamCode: Custom 2D Code Protocol

HamCode는 QR Code, DataMatrix와 같은 기존 2차원 코드 형식에서 착안한 **자작 2차원 코드 프로토콜**입니다.  
전체 크기는 **20×20** 격자이며, 고정된 파인더 패턴과 내부 데이터 영역으로 구성됩니다.

![image](https://i.ifh.cc/p0fW0R.png)

---

## 프로토콜 개요

### 좌표 정의
- 좌상단: **(1,1)**  
- 우하단: **(20,20)**  
- 내부 구현에서는 **0 기반 인덱스**를 사용합니다.

### 파인더 패턴
- **상단 4줄**과 **좌측 4줄**은 흰색 바탕.  
- 그 위에 다음과 같이 검은색 패턴을 배치합니다:
  - (1행 전체), (1열 전체)  
  - (3행, 열 3 ~ 20), (3열, 행 3 ~ 20)  
  - 네 점 표시: (2,4), (4,2), (2,20), (20,2)  
- 역할:
  - 코드 방향 검출  
  - 내측 16×16 데이터 영역 위치 정의  
  - 향후 버전에서 크기 확장을 지원할 수 있는 여유 마커  

### 데이터 영역
- 위치: (5,5)~(20,20) → **16×16 영역**  
- 이 영역은 다시 **4×4 구역 16개**로 나뉘어, 각 구역이 특정 **비트 인덱스(0~15)**를 담당합니다.

---

## 데이터 인코딩 과정

1. **문자열 입력**  
   - UTF-8로 최대 **21바이트**  
   - 마지막에 **NUL(0x00)** 종단 추가  

2. **비트 스트림 변환**  
   - 총 **22바이트 = 176비트**  
   - 바이트→비트 변환은 **MSB 우선 (bit7 → bit0)**  
   - 남는 비트는 **랜덤 채움**  

3. **청크 분할**  
   - 176비트를 **11비트 × 16청크**로 분할  

4. **Extended Hamming(16,11) 인코딩 (SECDED)**  
   - 데이터 비트: 인덱스 **[3,5,6,7,9,10,11,12,13,14,15]**  
   - 패리티 비트: 인덱스 **[1,2,4,8]** (짝수 패리티)  
   - 전체 패리티: 인덱스 **0**  
   - 결과: **16비트 코드워드 × 16청크**  

5. **2D 배치**  
   - 각 **비트 인덱스 b(0~15)** → 대응하는 4×4 구역  
   - 구역 내 **좌→우, 상→하** 순으로 청크 0~15의 해당 비트 배치  
   - 색상: **흰=0, 검=1**  

---

## 디코딩 과정

1. **입력**  
   - 파인더 패턴은 고정  
   - 사용자는 나머지 칸을 클릭으로 흑/백 토글  

2. **코드워드 추출**  
   - 16개의 4×4 구역에서 16개 코드워드(16비트) 재구성  

3. **오류 정정** (Extended Hamming SECDED)  
   - 청크당 1비트 오류: 자동 정정  
   - 청크당 2비트 오류: 검출 후 디코딩 거부  

4. **메시지 복원**  
   - 176비트 → 22바이트  
   - 첫 NUL(0x00) 전까지를 UTF-8 문자열로 출력  

---

## 프로그램 실행

### 인코더
```bash
python3 hamcode_encoder.py
```
- 텍스트 입력 후 **인코드** 버튼 클릭 → 20×20 코드 표시  
- **PNG로 저장**: 상하좌우 **1셀 흰색 여백**이 추가된 이미지 생성  

### 디코더
```bash
python3 hamcode_decoder.py
```
- 내측 16×16 칸 클릭으로 수정 가능  
- **디코드** 버튼 클릭 시 메시지 복원  
- 2비트 오류 감지 시 복원 거부  

---

## 구현 언어 및 라이브러리
- Python 3.x  
- Tkinter (GUI)  
- Pillow (PNG 저장 시 필요, 선택 설치)  

```bash
pip install pillow
```

---

## 설계 의도
- **직접 설계한 파인더 패턴**  
- **Extended Hamming Code(SECDED)** 를 이용한 오류 검출·정정  
- **비트 스트림 → 2D 배치 규칙**의 명확한 정의  

